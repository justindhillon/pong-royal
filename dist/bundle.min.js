function keyPressed(){switch(key){case"a":socket.emit("keydown","left");break;case"A":socket.emit("keydown","left");break;case"ArrowLeft":socket.emit("keydown","left");break;case"d":socket.emit("keydown","right");break;case"D":socket.emit("keydown","right");break;case"ArrowRight":socket.emit("keydown","right");break}}function keyReleased(){switch(key){case"a":socket.emit("keyup","left");break;case"A":socket.emit("keyup","left");break;case"ArrowLeft":socket.emit("keyup","left");break;case"d":socket.emit("keyup","right");break;case"D":socket.emit("keyup","right");break;case"ArrowRight":socket.emit("keyup","right");break}}function enoughPlayers(playerCount){if(3>playerCount){fill(255);textSize(32*canvasSize/800);textAlign(CENTER,CENTER);text("Waiting for "+(3-playerCount)+" more player(s)...",canvasSize/2,canvasSize/2,canvasSize/2);return false}return true}let canvasSize=800;function setup(){canvasSize=Math.min(windowWidth,windowHeight);createCanvas(canvasSize,canvasSize);angleMode(DEGREES);rectMode(CENTER)}function windowResized(){canvasSize=Math.min(windowWidth,windowHeight);resizeCanvas(canvasSize,canvasSize)}function draw(){background(0);const playerCount=Object.keys(players).length;if(!enoughPlayers(playerCount))return;const alivePlayers=Object.entries(players).filter(player=>!player[1].dead);const playerNumber=alivePlayers.findIndex(object=>object[0]===socket.id);translate(width/2,height/2);const angle=-360/alivePlayers.length;rotate(angle*playerNumber);translate(-width/2,-height/2);scale(canvasSize/800);for(let id in players){const player=players[id];if(!player.dead){paddle(player.x,player.y,player.rotation,player.number,player.height,player.width)}}for(let id in balls){fill(255);const ball=balls[id];ellipse(ball.x,ball.y,ball.r*2)}}const socket=io();let players={};let balls={};socket.on("update",(server_players,server_balls)=>{players=server_players;balls=server_balls});socket.on("death",()=>{console.log("death")});socket.on("hit",()=>{console.log("hit")});const colors=["#c61111","#132ed2","#11802d","#ee54bb","#f07d0d","#f6f657","#d6e0f0","#6b2fbc","#71491e","#38e2dd","#50f039","#50f039","#50f039","#fffebe","#708496","#928776","#ec7578"];function paddle(x,y,rotation,color,height,width){push();translate(x,y);rotate(rotation);fill(colors[color%17]);rect(0,width/2,height,width,5);pop()}